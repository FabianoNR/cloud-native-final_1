{
    "builders":[
        {
            "type": "docker",
            "image": "jetty:9.3-jre8",
            "commit": true
        }
    ],
    "provisioners":[
    	{
  			"type": "file",
  			"source": "../../artifactory/bin/com/fabianorapkiewicz/cloudnative/tema6/tema-06/1.0/tema-06-1.0.war",
  			"destination": "/var/lib/jetty/webapps/root.war"
		},
		{
			"type": "shell",
			"inline": [
						"apt-get update",
						"apt-get install python3 python3-pip python3-apt -yq",
						"pip3 install ansible"
					   ]
   	 	},
        {
      		"type": "ansible-local",
      		"playbook_file": "./playbook.yml"
    	}
    ],
    "post-processors": [
        [
            {
               "type": "docker-tag",
               "repository": "https://hub.docker.com/repository/docker/fabianonr/ilegra-final-cloud",
               "tag": "latest"
            },
            "docker-push"
        ]
    ]
}